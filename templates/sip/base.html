{% load static %}

<!DOCTYPE html>
<html class="no-js" lang="uk">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Сіль і Пательня</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="{% static 'img/favicon.ico' %}"
    />

    <!-- CSS
    ========================= -->
    <!--bootstrap min css-->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
    <!--owl carousel min css-->
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}" />
    <!--slick min css-->
    <link rel="stylesheet" href="{% static 'css/slick.css' %}" />
    <!--magnific popup min css-->
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}" />
    <!--font link-->
    <link href="https://fonts.googleapis.com/css2?family=Sofia+Sans:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!--font awesome css-->
    <link rel="stylesheet" href="{% static 'css/font.awesome.css' %}" />
    <!--ionicons css-->
    <link rel="stylesheet" href="{% static 'css/ionicons.min.css' %}" />
    <!--linearicons css-->
    <link rel="stylesheet" href="{% static 'css/linearicons.css' %}" />
    <!--animate css-->
    <link rel="stylesheet" href="{% static 'css/animate.css' %}" />
    <!--jquery ui min css-->
    <link rel="stylesheet" href="{% static 'css/jquery-ui.min.css' %}" />
    <!--slinky menu css-->
    <link rel="stylesheet" href="{% static 'css/slinky.menu.css' %}" />
    <!--plugins css-->
    <link rel="stylesheet" href="{% static 'css/plugins.css' %}" />

    <!-- Main Style CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />

    <!--modernizr min js here-->
    <script src="{% static 'js/vendor/modernizr-3.7.1.min.js' %}"></script>

  </head>
  <body>

  <!--navbar-->
  {% include 'includes/navbar.html' %}

  {% block content %}
  <!--  content-->
  {% endblock %}

  <!--footer-->
  {% include 'includes/footer.html' %}


   <!-- JS
============================================ -->
    <!--jquery min js-->
    <script src="{% static 'js/vendor/jquery-3.4.1.min.js' %}"></script>
    <!--popper min js-->
    <script src="{% static 'js/popper.js'%}"></script>
    <!--bootstrap min js-->
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <!--owl carousel min js-->
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <!--slick min js-->
    <script src="{% static 'js/slick.min.js' %}"></script>
    <!--magnific popup min js-->
    <script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
    <!--counterup min js-->
    <script src="{% static 'js/jquery.counterup.min.js' %}"></script>
    <!--jquery countdown min js-->
    <script src="{% static 'js/jquery.countdown.js' %}"></script>
    <!--jquery ui min js-->
    <script src="{% static 'js/jquery.ui.js' %}"></script>
    <!--jquery elevatezoom min js-->
    <script src="{% static 'js/jquery.elevatezoom.js' %}"></script>
    <!--isotope packaged min js-->
    <script src="{% static 'js/isotope.pkgd.min.js' %}"></script>
    <!--slinky menu js-->
    <script src="{% static 'js/slinky.menu.js' %}"></script>
    <!--instagramfeed menu js-->
    <script src="{% static 'js/jquery.instagramFeed.min.js' %}"></script>
    <!-- tippy bundle umd js -->
    <script src="{% static 'js/tippy-bundle.umd.js' %}"></script>
    <!-- Plugins JS -->
    <script src="{% static 'js/plugins.js' %}"></script>

    <!-- Main JS -->
    <script src="{% static 'js/main.js' %}"></script>

    <!-- plus and minus buttons in product details -->
    <script src="{% static 'js/custom.js' %}"></script>


    <!--Add product to the cart after press Add button-->
    <script>
      $(document).on('click', '#add-button', function (e){
          e.preventDefault();
          var prodid = $('#add-button').val();

          $.ajax({
              type: 'POST',
              url: '{% url "add_cart" %}',
              data: {
                  product_id: $('#add-button').val(),
                  quantity: $('#qty').val(),
                  csrfmiddlewaretoken: '{{csrf_token}}',
                  action: 'POST'
              },
              success: function (json) {
                document.getElementById('cart_icon_count').innerHTML = json.qty;
              },
              error: function(xhr, errmsg, err) {}
          });
      })
    </script>


  <!--Delete product from the basket-->
    <script>
      $(document).on('click', '.delete-button', function (e){
          e.preventDefault();
          var prodid = $(this).data('index');
          $.ajax({
              type: 'POST',
              url: '{% url "cart_delete" %}',
              data: {
                  product_id: $(this).data('index'),
                  csrfmiddlewaretoken: '{{csrf_token}}',
                  action: 'POST'
              },
              success: function (json) {
                $('.product-item[data-index="'+ prodid +'"]').remove();
                document.getElementById('total').innerHTML = json.total;
                document.getElementById('cart_icon_count').innerHTML = json.qty;
              },
              error: function(xhr, errmsg, err) {}
          });
      })
    </script>

<!--    Delete product from the mini cart by press delete icon-->
    <script>
      $(document).on('click', '.delete-icon', function (e){
        e.preventDefault();
        var prodid = $(this).data('index');
        $.ajax({
            type: 'POST',
            url: '{% url "mini_cart_delete" %}',
            data: {
                product_id: $(this).data('index'),
                csrfmiddlewaretoken: '{{csrf_token}}',
                action: 'POST'
            },
            success: function (json) {
              $('.cart_item[data-index="'+ prodid +'"]').remove();
              document.getElementById('mini-cart-total').innerHTML = json.mini_cart_total;
              document.getElementById('cart_icon_count').innerHTML = json.qty;
            },
            error: function(xhr, errmsg, err) {}
        });
      });
    </script>

  <!--Add quantity by press plus button-->
    <script>
      $(document).on('click', '.button-plus', function (e){
          e.preventDefault();
          var prodid = $(this).data('index');
          $.ajax({
              type: 'POST',
              url: '{% url "plus_quantity" %}',
              data: {
                  product_id: $(this).data('index'),
                  csrfmiddlewaretoken: '{{csrf_token}}',
                  action: 'POST'
              },
              success: function (json) {
                document.getElementById(prodid + 'item-qty').value = json.item_qty;
                document.getElementById(prodid + 'item_total').innerHTML = json.item_total_price;
                document.getElementById('cart_icon_count').innerHTML = json.qty;
                document.getElementById('total').innerHTML = json.total;
              },
              error: function(xhr, errmsg, err) {}
          });
      })
    </script>


  <!--Subtract quantity by press minus button-->
    <script>
      $(document).on('click', '.button-minus', function (e){
          e.preventDefault();
          var prodid = $(this).data('index');
          $.ajax({
              type: 'POST',
              url: '{% url "minus_quantity" %}',
              data: {
                  product_id: $(this).data('index'),
                  csrfmiddlewaretoken: '{{csrf_token}}',
                  action: 'POST'
              },
              success: function (json) {
                if (json.item_qty < 1) {
                  $('.product-item[data-index="'+ prodid +'"]').remove();
                }
                document.getElementById(prodid + 'item-qty').value = json.item_qty;
                document.getElementById(prodid + 'item_total').innerHTML = json.item_total_price;
                document.getElementById('cart_icon_count').innerHTML = json.qty;
                document.getElementById('total').innerHTML = json.total;
              },
              error: function(xhr, errmsg, err) {}
          });
      })
    </script>


    <!--Refresh mini cart by press cart icon-->
    <script>
      $("#mini-cart").click(function () {
        $("#mini").load(location.href + " #mini");
        $("#mini-cart-total").load(location.href + " #mini-cart-total");
       });
    </script>


    <!--Add product to the cart after press action link add to cart-->
    <script>
      $(document).on('click', '.quick-add-button', function (e){
          e.preventDefault();
          var prodid = $(this).data('index');

          $.ajax({
              type: 'POST',
              url: '{% url "add_cart" %}',
              data: {
                  product_id: $(this).data('index'),
                  quantity: 1,
                  csrfmiddlewaretoken: '{{csrf_token}}',
                  action: 'POST'
              },
              success: function (json) {
                document.getElementById('cart_icon_count').innerHTML = json.qty;
              },
              error: function(xhr, errmsg, err) {}
          });
      })
    </script>


    <!--Open product popup card after press action link quick show product details-->
    <script>
      $(document).on('click', '.quick-show-button', function (e){
          e.preventDefault();
          var prodid = $(this).data('index');

          $.ajax({
              type: 'POST',
              url: '{% url "get_single_product" %}',
              data: {
                  product_id: $(this).data('index'),
                  csrfmiddlewaretoken: '{{csrf_token}}',
                  action: 'POST'
              },
              success: function (json) {
                document.getElementById('quick-add-button').value = prodid;
                document.getElementById('quick_title').innerHTML = json.title;
                document.getElementById('quick_new_price').innerHTML = json.price;
                document.getElementById('quick_old_price').innerHTML = json.old_price;
                document.getElementById('quick_description').innerHTML = json.description;
                document.getElementById('quick_img').src = json.image;
              },
              error: function(xhr, errmsg, err) {}
          });
      })
    </script>


  <!--Add product to the cart after press quick add button in product quick show popup-->
    <script>
      $(document).on('click', '#quick-add-button', function (e){
          e.preventDefault();
          var prodid = $('#quick-add-button').val();

          $.ajax({
              type: 'POST',
              url: '{% url "add_cart" %}',
              data: {
                  product_id: $('#quick-add-button').val(),
                  quantity: $('#qty-quick-popup').val(),
                  csrfmiddlewaretoken: '{{csrf_token}}',
                  action: 'POST'
              },
              success: function (json) {
                document.getElementById('cart_icon_count').innerHTML = json.qty;
              },
              error: function(xhr, errmsg, err) {}
          });
      })
    </script>


  <!--Add product to the cart after press quick add button in product quick show popup-->
    <script>
      $(document).on('click', '#quick-add-button', function (e){
          e.preventDefault();
          var prodid = $('#quick-add-button').val();

          $.ajax({
              type: 'POST',
              url: '{% url "add_cart" %}',
              data: {
                  product_id: $('#quick-add-button').val(),
                  quantity: $('#qty-quick-popup').val(),
                  csrfmiddlewaretoken: '{{csrf_token}}',
                  action: 'POST'
              },
              success: function (json) {
                document.getElementById('cart_icon_count').innerHTML = json.qty;
              },
              error: function(xhr, errmsg, err) {}
          });
      })
    </script>


  <!--Set quantity to one after close product quick show popup-->
    <script>
       $("#close-quick-button").click(function () {
        document.getElementById("qty-quick-popup").value = 1;
       });
    </script>


  </body>
  </html>